## 관계형 DB는 정규화된 테이블 2개로 다대다 관계를 표현할 수 없다.

- 연결 테이블을 추가하여, 일대다, 다대이리 관계로 풀어내야 한다.

- Join Table

- 회원이 여러 상품을 주문할 수 있을 때, 중간에 Member_Product 테이블을 새롭게 만드는 형식으로만 가능

## 객체도 마찬가지

- 객체는 컬렉션을 사용하면 객체 2개로 다대다 관계가 가능하긴 하다.

- ORM 입장에서 객체는 되는데 RDB는 안되면 지원해주긴 해야 한다.

## 다대다

@ManyToMany

- 편리해 보이긴 하지만 실무에서 쓰지 않는다.

```java
@ManyToMany
@JoinTable(name = "MEMBER_PRODUCT")
private List<Product> ~
```

- 다대다 매핑을 지원한다.

## 다대다 매핑의 한계

- 연결테이블이 단순히 연결만 하고 끝나는게 아니다.

- Member_Product 테이블에 별에별 정보갈 필요가 있는데, 매핑정보만 들어가면?

- 중간 테이블이 생기기 때문에 쿼리도 예상하기 힘들다.

- 중간 테이블을 우리가 직접 만들어야 함.(Entity로 승격 시킨다.)

## Member 와 Product 사이의 관계 Member_Product = ORDER

- 우리 실제 비즈니스에서 ManyToMany 로 풀 수 있는 다대다 문제는 거의 없다.

- 필요할 때 엔티티로 승격

## 팁) PK

- 왠만하면 PK는 의미 없는 값을 쓰는게 좋음

- 어떤 경우, ORDER 처럼 가운데 낀 테이블의 PK를 Member와 Prodcut PK의 조합으로 쓰는 경우가 있지만,

- 실무에서 운영할 때는 Id가 어딘가에 종속되어 있으면 시스템 추가 업데이트가 어려워 질 수 있음.
